
<!doctype html>
<html lang="en">

<head>
  <title>meeting.fail</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
  <style>
    [data-theme="dark"] {
      --background-color: #282828;
      --text-color: #ffffff;
    }

    [data-theme="light"] {
      --background-color: #ffffff;
      --text-color: #282828;
    }

    body {
      margin-bottom: 50em;
      background-color: var(--background-color);
      color: var(--text-color);
    }

    hr.new1 {
      border-top: 1px solid #b3b3b3;
    }

    @media (min-width: 768px) {
      .container {
        max-width: 50vw;
      }
    }

    h1 {
      font-size: 3em;
      font-weight: 700;
	  text-align: center;
	  margin-top: 5vw;
    }

    h2 {
      font-size: 1.5em;
      font-weight: 400;
    }

    input.form-control {
      background-color: var(--background-color);
      color: var(--text-color);
    }

    input.form-control:focus {
      background-color: var(--background-color);
      color: var(--text-color);
    }

    #ergebnis {
      padding: 1vw 2vw;
    }

    #ergebnis_wert {
      color: #4285f4;
      font-weight: 500;
      font-size: xx-large;
    }
	td {
  padding: 15px;
}
.form-control:disabled, .form-control[readonly] {
    background-color: var(--background-color);
	color: var(--text-color);
}

table {
table-layout: auto;
width: 100%;

}
  </style>
</head>

<body>
	

	<h1 itemprop="name" id="headline">meeting.fail üí¨</h1>

  <div id="container" class="container">

    <hr class="new1">
	<table>
	<tr>
	<td colspan="2">
    <p id="subtitle1">Dieses Programm errechnet anhand des Durchschnittsgehalt die Kosten f√ºr ein Meeting.</p>
    <p id="subtitle2">Das Durchschnittsgehalt ist im Programm mit 4000‚Ç¨ brutto monatlich
      festgelegt.</br><i>(Bundesdurchschnitt bei ca. 3975‚Ç¨)</i></p>
	
	</td>
</tr>
	<tr>
	<td>	
	<p id="gehalttitle"><b>üí∂ Teilnehmer Durchschnittsgehalt</b></p>
	
	<div class="input-group 1">
		<input value="4000"
		  class="form-control" type="number" id="dgehalt">
		
		<div class="input-group-append">
			<span class="input-group-text" id="basic-addon2">‚Ç¨</span>
		</div>
	</div>
	
	</td>
	<td>
	
	<p id="laengetitle"><b>‚è∞ Meeting-L√§nge</b></p>
	
	<div class="input-group 2">	
		<input class="form-control" type="number" id="laenge"
		  placeholder="In Stunden (bspw. 1.7)">
		  
		<div class="input-group-append">
			<span class="input-group-text" id="basic-addon2">h</span>
		</div>
	</div>
	
	</td>
	</tr>
	<tr>
	<td>

	<p id="teilnehmertitle"><b>üë®‚Äçüíºüë©‚Äçüíº Teilnehmeranzahl</b></p>
	<div class="input-group 3">	
		<input class="form-control" type="number"
			  id="teilnehmer" placeholder="Ganzzahlen">
			  
		<div class="input-group-append">
			<span class="input-group-text" id="basic-addon2">N</span>
		</div>
	</div>
	
	</td>
	<td>
	<p id="biertitle"><b>üç∫ Bierpreis</b></p>
	<div class="input-group 4">	
		<input class="form-control" type="number"
			  id="bierpreis" value="4">
			  
		<div class="input-group-append">
			<span class="input-group-text" id="basic-addon2">‚Ç¨</span>
		</div>
	</div>
	</td>
	</tr>
</table>	
    <hr class="new1">

    <div id="zusammenfassung">
    </div>
    <div id="ergebnis">
      <div id="ergebnis_wert">0 ‚Ç¨</div>
    </div>
    <div id="bierwert">
    </div>

    <hr class="new1">

    <p id="sharingtext"><b>ü§ù URL zum Teilen</b></p><input readonly onClick="this.select();" class="form-control" type="search"
      id="myurl" placeholder="" autocomplete="off" spellcheck="false">

    <hr class="new1">

    <ul>
      <li>Made by <a href="https://github.com/roflrolle/MeetingFail">roflrolle</a> with ‚ù§ & üç∫</li>
      <li><button type="button" class="btn btn-light" id="theme-switcher">‚òÄ Light Mode</button></li>
    </ul>

    <hr class="new1">

  </div>

  <script>
  
	var num1="100.123";
	var num2="1E+2";
	var num3="1E";
	var num4="abc";
	
	console.log(parseFloat(num1));
	console.log(parseFloat(num2));
	console.log(parseFloat(num3));
	console.log(parseFloat(num4));
	
    // Credits to https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference
    function getFirstBrowserLanguage() {
      var nav = window.navigator,
        browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'],
        i,
        language;

      // support for HTML 5.1 "navigator.languages"
      if (Array.isArray(nav.languages)) {
        for (i = 0; i < nav.languages.length; i++) {
          language = nav.languages[i];
          if (language && language.length) {
            return language;
          }
        }
      }

      // support for other well known properties in browsers
      for (i = 0; i < browserLanguagePropertyKeys.length; i++) {
        language = nav[browserLanguagePropertyKeys[i]];
        if (language && language.length) {
          return language;
        }
      }

      return null;
    };

    // Credits for Darmoke to https://www.pullrequest.com/blog/how-to-implement-dark-mode-with-css-js/
    // Wait for document to load
    document.addEventListener("DOMContentLoaded", function (event) {
      document.documentElement.setAttribute("data-theme", "dark");

      // Get our button switcher
      var themeSwitcher = document.getElementById("theme-switcher");

      // When our button gets clicked
      themeSwitcher.onclick = function () {
        // Get the current selected theme, on the first run
        // it should be `light`
        var currentTheme = document.documentElement.getAttribute("data-theme");

        // Switch between `dark` and `light`
        var switchToTheme = currentTheme === "dark" ? "light" : "dark"

        // Set our currenet theme to the new one
        document.documentElement.setAttribute("data-theme", switchToTheme);

        if (switchToTheme === "dark") {
          console.log(switchToTheme);
          themeSwitcher.innerHTML = "‚òÄ Light Mode";
        }
        if (switchToTheme === "light") {
          console.log(switchToTheme);
          themeSwitcher.innerHTML = "üåô Dark Mode ";
        }
      }
    });
    (new URL(window.location.href)).searchParams.forEach((x, y) => document.getElementById(y).value = x);

    var userLang = getFirstBrowserLanguage();

    const english = [
      ["headline", "meeting.fail üí¨"],
      ["subtitle1", "This website calculates the meetings costs of your meeting based on the average income."],
      ["subtitle2", "The average income is set to 4000‚Ç¨ monthly in this program.</br><i>(German average ca. 3975‚Ç¨)</i>"],
      ["gehalttitle", "üí∂ Average monthly income of participants"],
      ["laengetitle", "<b>‚è∞ Meeting-Length</b>"],
      ["teilnehmertitle", "<b>üë®‚Äçüíºüë©‚Äçüíº Participant count</b>"],
      ["laenge", "in hours (for example 1.7)"],
      ["teilnehmer", "integers"],
      ["sharingtext", "ü§ù URL for sharing"],
	  ["biertitle","üç∫ Beer price"]
    ];

    function set_language_en() {
      english.forEach(element => {

        var myelement = document.getElementById(element[0]);
        console.log(myelement);

        if (myelement.nodeName === "P") {
          myelement.innerHTML = element[1];
        }
        else if (myelement.nodeName === "INPUT") {
          myelement.placeholder = element[1];
        }
        else if (myelement.nodeName === "H1") {
          myelement.innerHTML = element[1];
        }
        else {

        }
      }
      );

      zusammenfassungdefaulttext = '<div class="alert alert-dark" role="alert">Please insert values in the fields above</div>'
      eurocatext = "ca."
      zusammenfassung1 = "Your meeting with "
      zusammenfassung2 = " participants in  "
      zusammenfassung3 = " hours cost:"
      bier1 = "You could have spend this money on "
      bier2 = " beer for you and every participant üç∫"
      numbererror='<div class="alert alert-dark" role="alert">The fields are accepting only numbers (>0)</div>'
    
    }

    var zusammenfassungdefaulttext ='<div class="alert alert-dark" role="alert">Tragen sie oben Werte in die Felder ein</div>'
    var numbererror='<div class="alert alert-dark" role="alert">Die Felder akzeptieren nur Zahlenwerte (>0)</div>'
    var eurocatext = "ca."
    var zusammenfassung1 = "Ihr Meeting mit "
    var zusammenfassung2 = " Teilnehmern hat in "
    var zusammenfassung3 = " Stunden folgende Kosten verursacht:"
    var bier1 = "Daf√ºr h√§tten Sie jedem Teilnehmer und sich selbst ca. "
    var bier2 = " Bier spendieren k√∂nnen üç∫"

    if (!userLang.startsWith("de")) {
      set_language_en();
    }
    const laenge = document.getElementById("laenge");
    const myurl = document.getElementById("myurl");
    const meetingtext = document.getElementById("zusammenfassung");
    const teilnehmer = document.getElementById("teilnehmer");
    const gehaltfeld = document.getElementById("dgehalt");
    var durchschnitt = gehaltfeld.value;
    const ergebniswert = document.getElementById("ergebnis_wert");

    bierkostencount = 0;

    myurl.value = window.location.protocol + "//" + window.location.hostname

    function update_uri() {

      var durchschnitt = parseFloat(gehaltfeld.value)
      var euro = null;
      var stundenlohn = null;
      stundenlohn = (3 * durchschnitt) / 13 / 40;
      stundenlohn = Math.round(stundenlohn);

      if (laenge.value !== "" && teilnehmer.value !== "" && bierpreis.value !== "") {
        if(isNaN(laenge.value) || isNaN(teilnehmer.value) || (Math.sign(gehaltfeld.value) !== 1)|| (Math.sign(teilnehmer.value) !== 1)|| (Math.sign(laenge.value) !== 1)|| (Math.sign(bierpreis.value) !== 1)){
          zusammenfassung.innerHTML = numbererror;
          bierwert.textContent="";
          myurl.value=""
          euro = "0";
        }
        else{
          euro = parseFloat(stundenlohn) * parseFloat(laenge.value) * parseFloat(teilnehmer.value)
          zusammenfassung.textContent = zusammenfassung1 + parseFloat(teilnehmer.value) + zusammenfassung2 + parseFloat(laenge.value) + zusammenfassung3;
          bierkostencount = Math.floor((euro / parseFloat(teilnehmer.value)) / parseFloat(bierpreis.value))
          bierwert.textContent = bier1 + bierkostencount + bier2
          myurl.value = window.location.protocol + "//" + window.location.hostname + "?&laenge=" + parseFloat(laenge.value) + "&dgehalt=" + parseFloat(gehaltfeld.value) + "&teilnehmer=" + parseFloat(teilnehmer.value)
        }
      }
      else {
        zusammenfassung.innerHTML = zusammenfassungdefaulttext;
        bierwert.textContent="";
        myurl.value=""
        euro = "0";
      }

      ergebniswert.textContent = eurocatext + " " + Math.floor(euro) + " ‚Ç¨";
    }

    zusammenfassung.innerHTML = zusammenfassungdefaulttext;

    update_uri();

    teilnehmer.addEventListener("input", update_uri);
    laenge.addEventListener("input", update_uri);
    gehaltfeld.addEventListener("input", update_uri);
	bierpreis.addEventListener("input", update_uri);

  </script>
</body>

</html>
