<!doctype html>
<html lang="en">

<head>
<script type="text/javascript">
!(function (cfg){function e(){cfg.onInit&&cfg.onInit(i)}var S,u,D,t,n,i,C=window,x=document,w=C.location,I="script",b="ingestionendpoint",E="disableExceptionTracking",A="ai.device.";"instrumentationKey"[S="toLowerCase"](),u="crossOrigin",D="POST",t="appInsightsSDK",n=cfg.name||"appInsights",(cfg.name||C[t])&&(C[t]=n),i=C[n]||function(l){var d=!1,g=!1,f={initialize:!0,queue:[],sv:"7",version:2,config:l};function m(e,t){var n={},i="Browser";function a(e){e=""+e;return 1===e.length?"0"+e:e}return n[A+"id"]=i[S](),n[A+"type"]=i,n["ai.operation.name"]=w&&w.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(f.sv||f.version),{time:(i=new Date).getUTCFullYear()+"-"+a(1+i.getUTCMonth())+"-"+a(i.getUTCDate())+"T"+a(i.getUTCHours())+":"+a(i.getUTCMinutes())+":"+a(i.getUTCSeconds())+"."+(i.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z",iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}},ver:4,seq:"1",aiDataContract:undefined}}var h=-1,v=0,y=["js.monitor.azure.com","js.cdn.applicationinsights.io","js.cdn.monitor.azure.com","js0.cdn.applicationinsights.io","js0.cdn.monitor.azure.com","js2.cdn.applicationinsights.io","js2.cdn.monitor.azure.com","az416426.vo.msecnd.net"],k=l.url||cfg.src;if(k){if((n=navigator)&&(~(n=(n.userAgent||"").toLowerCase()).indexOf("msie")||~n.indexOf("trident/"))&&~k.indexOf("ai.3")&&(k=k.replace(/(\/)(ai\.3\.)([^\d]*)$/,function(e,t,n){return t+"ai.2"+n})),!1!==cfg.cr)for(var e=0;e<y.length;e++)if(0<k.indexOf(y[e])){h=e;break}var i=function(e){var a,t,n,i,o,r,s,c,p,u;f.queue=[],g||(0<=h&&v+1<y.length?(a=(h+v+1)%y.length,T(k.replace(/^(.*\/\/)([\w\.]*)(\/.*)$/,function(e,t,n,i){return t+y[a]+i})),v+=1):(d=g=!0,o=k,c=(p=function(){var e,t={},n=l.connectionString;if(n)for(var i=n.split(";"),a=0;a<i.length;a++){var o=i[a].split("=");2===o.length&&(t[o[0][S]()]=o[1])}return t[b]||(e=(n=t.endpointsuffix)?t.location:null,t[b]="https://"+(e?e+".":"")+"dc."+(n||"services.visualstudio.com")),t}()).instrumentationkey||l.instrumentationKey||"",p=(p=p[b])?p+"/v2/track":l.endpointUrl,(u=[]).push((t="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",n=o,r=p,(s=(i=m(c,"Exception")).data).baseType="ExceptionData",s.baseData.exceptions=[{typeName:"SDKLoadFailed",message:t.replace(/\./g,"-"),hasFullStack:!1,stack:t+"\nSnippet failed to load ["+n+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(w&&w.pathname||"_unknown_")+"\nEndpoint: "+r,parsedStack:[]}],i)),u.push((s=o,t=p,(r=(n=m(c,"Message")).data).baseType="MessageData",(i=r.baseData).message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+s+")").replace(/\"/g,"")+'"',i.properties={endpoint:t},n)),o=u,c=p,JSON&&((r=C.fetch)&&!cfg.useXhr?r(c,{method:D,body:JSON.stringify(o),mode:"cors"}):XMLHttpRequest&&((s=new XMLHttpRequest).open(D,c),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(o))))))},a=function(e,t){g||setTimeout(function(){!t&&f.core||i()},500),d=!1},T=function(e){var n=x.createElement(I),e=(n.src=e,cfg[u]);return!e&&""!==e||"undefined"==n[u]||(n[u]=e),n.onload=a,n.onerror=i,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||a(0,t)},cfg.ld&&cfg.ld<0?x.getElementsByTagName("head")[0].appendChild(n):setTimeout(function(){x.getElementsByTagName(I)[0].parentNode.appendChild(n)},cfg.ld||0),n};T(k)}try{f.cookie=x.cookie}catch(p){}function t(e){for(;e.length;)!function(t){f[t]=function(){var e=arguments;d||f.queue.push(function(){f[t].apply(f,e)})}}(e.pop())}var r,s,n="track",o="TrackPage",c="TrackEvent",n=(t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+o,"stop"+o,"start"+c,"stop"+c,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),f.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4},(l.extensionConfig||{}).ApplicationInsightsAnalytics||{});return!0!==l[E]&&!0!==n[E]&&(t(["_"+(r="onerror")]),s=C[r],C[r]=function(e,t,n,i,a){var o=s&&s(e,t,n,i,a);return!0!==o&&f["_"+r]({message:e,url:t,lineNumber:n,columnNumber:i,error:a,evt:C.event}),o},l.autoExceptionInstrumented=!0),f}(cfg.cfg),(C[n]=i).queue&&0===i.queue.length?(i.queue.push(e),i.trackPageView({})):e();})({
src: "https://js.monitor.azure.com/scripts/b/ai.3.gbl.min.js",
// name: "appInsights",
// ld: 0,
// useXhr: 1,
crossOrigin: "anonymous",
// onInit: null,
// cr: 0,
cfg: { // Application Insights Configuration
 connectionString: "InstrumentationKey=f0e51d4a-4cd2-44b8-b45e-c3ca392d603f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/;ApplicationId=2eb42a18-cb87-4cd4-a280-d85cd3908c7a"
}});
</script>
  <title>meeting.fail</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
  <style>

    [data-theme="dark"] {
      --background-color: #181818;
      --text-color: #ffffff;
    }

    [data-theme="light"] {
      --background-color: #ffffff;
      --text-color: #181818;
    }

    body {
      margin-bottom: 5em;
      background-color: var(--background-color);
      color: var(--text-color);
    }

    hr.new1 {
      border-top: 1px solid #03DAC6;
    }

    @media (min-width: 768px) {
      .container {
        max-width: 75vw;
      }
    }

    h1 {
      font-size: 3em;
      font-weight: 700;
	    text-align: center;
	    margin-top: 5vw;
    }

    h2 {
      font-size: 1.5em;
      font-weight: 400;
    }

    input.form-control {
      background-color: var(--background-color);
      color: var(--text-color);
    }

    input.form-control:focus {
      background-color: var(--background-color);
      color: var(--text-color);
    }

    #ergebnis {
      padding: 1vw 2vw;
    }

    #ergebnis_wert {
      color: #bb86fc;
      font-weight: 500;
      font-size: xx-large;
    }

    a {
      color: #bb86fc;
    }

    td {
    padding: 15px;
    }

    .form-control:disabled, .form-control[readonly] {
      background-color: var(--background-color);
      color: var(--text-color);
    }

    table {
      table-layout: auto;
      width: 100%;
    }
  </style>
</head>

<body>
	<h1 itemprop="name" id="headline">meeting.fail üí¨</h1>

  <div id="container" class="container">

	<table>
    <tr>
      <td colspan="2">
        <p id="subtitle1">Dieses Programm errechnet anhand des Durchschnittsgehalt die Kosten f√ºr ein Meeting.</p>
        <p id="subtitle2">Das <strong style='color:#bb86fc'>Durchschnittsgehalt</strong> ist im Programm mit <strong style='color:#bb86fc'>4000‚Ç¨</strong> brutto monatlich
          festgelegt.</br><i>(Bundesdurchschnitt bei ca. 3975‚Ç¨)</i></p> 
      </td>
    </tr>
    <tr>
      <td>	
        <p id="gehalttitle"><b>üí∂ Teilnehmer Durchschnittsgehalt</b></p>

        <div class="input-group 1">
          <input value="4000" class="form-control" type="number" id="dgehalt">

          <div class="input-group-append">
            <span class="input-group-text" id="basic-addon2">‚Ç¨</span>
          </div>
        </div>
      </td>

      <td>
        <p id="laengetitle"><b>‚è∞ Meeting-L√§nge</b></p>

        <div class="input-group 2">	
          <input class="form-control" type="number" id="laenge" placeholder="In Stunden (bspw. 1.7)">

          <div class="input-group-append">
            <span class="input-group-text" id="basic-addon2">h</span>
          </div>

        </div>
      </td>
	</tr>
	<tr>
    <td>
      <p id="teilnehmertitle"><b>üë®‚Äçüíºüë©‚Äçüíº Teilnehmeranzahl</b></p>
      <div class="input-group 3">	
        <input class="form-control" type="number" id="teilnehmer" placeholder="Ganzzahlen">

        <div class="input-group-append">
          <span class="input-group-text" id="basic-addon2">N</span>
        </div>
      </div>
    </td>
    <td>
      <p id="biertitle"><b>üç∫ Bierpreis</b></p>
      <div class="input-group 4">	
        <input class="form-control" type="number" id="bierpreis" value="4">

        <div class="input-group-append">
          <span class="input-group-text" id="basic-addon2">‚Ç¨</span>
        </div>
      </div>
    </td>
	</tr>
</table>	

    <hr class="new1">
    <div id="zusammenfassung">
    </div>
    <div id="ergebnis">
      <div id="ergebnis_wert">0 ‚Ç¨</div>
    </div>
    <div id="bierwert">
    </div>

    <hr class="new1">

    <p id="sharingtext"><b>ü§ù URL zum Teilen</b></p><input readonly onClick="this.select();" class="form-control" type="search"
      id="myurl" placeholder="" autocomplete="off" spellcheck="false">

    <p>
      <ul>
        <li>Made by <a href="https://github.com/roflrolle/MeetingFail">roflrolle</a> with ‚ù§ & üç∫</li>
        <li><button type="button" class="btn btn-light" id="theme-switcher">‚òÄ Light Mode</button></li>
      </ul>
    </p>

  </div>

  <script>
	
    // Credits to https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference
    function getFirstBrowserLanguage() {
      var nav = window.navigator,
        browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'],
        i,
        language;

      // support for HTML 5.1 "navigator.languages"
      if (Array.isArray(nav.languages)) {
        for (i = 0; i < nav.languages.length; i++) {
          language = nav.languages[i];
          if (language && language.length) {
            return language;
          }
        }
      }

      // support for other well known properties in browsers
      for (i = 0; i < browserLanguagePropertyKeys.length; i++) {
        language = nav[browserLanguagePropertyKeys[i]];
        if (language && language.length) {
          return language;
        }
      }

      return null;
    };

    // Credits for Darkmode to https://www.pullrequest.com/blog/how-to-implement-dark-mode-with-css-js/
    // Wait for document to load
    document.addEventListener("DOMContentLoaded", function (event) {
      document.documentElement.setAttribute("data-theme", "dark");

      // Get our button switcher
      var themeSwitcher = document.getElementById("theme-switcher");

      // When our button gets clicked
      themeSwitcher.onclick = function () {
        // Get the current selected theme, on the first run
        // it should be `light`
        var currentTheme = document.documentElement.getAttribute("data-theme");

        // Switch between `dark` and `light`
        var switchToTheme = currentTheme === "dark" ? "light" : "dark"

        // Set our currenet theme to the new one
        document.documentElement.setAttribute("data-theme", switchToTheme);

        if (switchToTheme === "dark") {
          console.log(switchToTheme);
          themeSwitcher.innerHTML = "‚òÄ Light Mode";
        }
        if (switchToTheme === "light") {
          console.log(switchToTheme);
          themeSwitcher.innerHTML = "üåô Dark Mode ";
        }
      }
    });
    (new URL(window.location.href)).searchParams.forEach((x, y) => document.getElementById(y).value = x);

    var userLang = getFirstBrowserLanguage();

    const english = [
      ["headline", "meeting.fail üí¨"],
      ["subtitle1", "This website calculates the meetings costs of your meeting based on the average income."],
      ["subtitle2", "The average income is set to 4000‚Ç¨ monthly in this program.</br><i>(German average ca. 3975‚Ç¨)</i>"],
      ["gehalttitle", "üí∂ Average monthly income of participants"],
      ["laengetitle", "<b>‚è∞ Meeting-Length</b>"],
      ["teilnehmertitle", "<b>üë®‚Äçüíºüë©‚Äçüíº Participant count</b>"],
      ["laenge", "in hours (for example 1.7)"],
      ["teilnehmer", "integers"],
      ["sharingtext", "ü§ù URL for sharing"],
	    ["biertitle","üç∫ Beer price"]
    ];

    function set_language_en() {
      english.forEach(element => {

        var myelement = document.getElementById(element[0]);
        console.log(myelement);

        if (myelement.nodeName === "P") {
          myelement.innerHTML = element[1];
        }
        else if (myelement.nodeName === "INPUT") {
          myelement.placeholder = element[1];
        }
        else if (myelement.nodeName === "H1") {
          myelement.innerHTML = element[1];
        }
        else {

        }
      }
      );

      zusammenfassungdefaulttext = '<div class="alert alert-dark" role="alert">Please insert values in the fields above</div>'
      eurocatext = "ca."
      zusammenfassung1 = "Your meeting with <strong style='color:#bb86fc'>"
      zusammenfassung2 = " </strong>participants in  <strong style='color:#bb86fc'>"
      zusammenfassung3 = " </strong>hours cost:"
      bier1 = "You could have spend this money on <strong style='color:#bb86fc'>"
      bier2 = " </strong>beer for you and every participant üç∫"
      numbererror='<div class="alert alert-dark" role="alert">The fields are accepting only numbers (>0)</div>'
    
    }

    var zusammenfassungdefaulttext ='<div class="alert alert-dark" role="alert">Tragen sie oben Werte in die Felder ein</div>'
    var numbererror='<div class="alert alert-dark" role="alert">Die Felder akzeptieren nur Zahlenwerte (>0)</div>'
    var eurocatext = "ca."
    var zusammenfassung1 = "Ihr Meeting mit <strong style='color:#bb86fc'> "
    var zusammenfassung2 = " </strong>Teilnehmern hat in <strong style='color:#bb86fc'>"
    var zusammenfassung3 = " </strong>Stunden folgende Kosten verursacht:"
    var bier1 = "Daf√ºr h√§tten Sie jedem Teilnehmer und sich selbst ca. <strong style='color:#bb86fc'>"
    var bier2 = " </strong>Bier spendieren k√∂nnen üç∫"

    if (!userLang.startsWith("de")) {
      set_language_en();
    }
    const laenge = document.getElementById("laenge");
    const myurl = document.getElementById("myurl");
    const meetingtext = document.getElementById("zusammenfassung");
    const teilnehmer = document.getElementById("teilnehmer");
    const gehaltfeld = document.getElementById("dgehalt");
    const bierpreis = document.getElementById("bierpreis");
    var durchschnitt = gehaltfeld.value;
    const ergebniswert = document.getElementById("ergebnis_wert");

    bierkostencount = 0;

    myurl.value = window.location.protocol + "//" + window.location.hostname

    function update_uri() {

      var durchschnitt = parseFloat(gehaltfeld.value)
      var euro = null;
      var stundenlohn = null;
      stundenlohn = (3 * durchschnitt) / 13 / 40;
      stundenlohn = Math.round(stundenlohn);

      if (laenge.value !== "" && teilnehmer.value !== "" && bierpreis.value !== "") {
        if(isNaN(laenge.value) || isNaN(teilnehmer.value) || (Math.sign(gehaltfeld.value) !== 1)|| (Math.sign(teilnehmer.value) !== 1)|| (Math.sign(laenge.value) !== 1)|| (Math.sign(bierpreis.value) !== 1)){
          zusammenfassung.innerHTML = numbererror;
          bierwert.textContent="";
          myurl.value=""
          euro = "0";
        }
        else{
          euro = parseFloat(stundenlohn) * parseFloat(laenge.value) * parseFloat(teilnehmer.value)
          zusammenfassung.innerHTML = zusammenfassung1 + parseFloat(teilnehmer.value) + zusammenfassung2 + parseFloat(laenge.value) + zusammenfassung3;
          bierkostencount = Math.floor((euro / parseFloat(teilnehmer.value)) / parseFloat(bierpreis.value))
          bierwert.innerHTML = bier1 + bierkostencount + bier2
          myurl.value = window.location.protocol + "//" + window.location.hostname + "?&laenge=" + parseFloat(laenge.value) + "&dgehalt=" + parseFloat(gehaltfeld.value) + "&teilnehmer=" + parseFloat(teilnehmer.value)+ "&bierpreis=" + parseFloat(bierpreis.value)
        }
      }
      else {
        zusammenfassung.innerHTML = zusammenfassungdefaulttext;
        bierwert.textContent="";
        myurl.value=""
        euro = "0";
      }

      ergebniswert.textContent = eurocatext + " " + Math.floor(euro) + " ‚Ç¨";
    }

    zusammenfassung.innerHTML = zusammenfassungdefaulttext;

    update_uri();

    teilnehmer.addEventListener("input", update_uri);
    laenge.addEventListener("input", update_uri);
    gehaltfeld.addEventListener("input", update_uri);
	  bierpreis.addEventListener("input", update_uri);

  </script>
</body>
</html>
